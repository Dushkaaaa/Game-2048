!function(){var e=new/*#__PURE__*/(function(){var e;function t(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.defaultState=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.board=e||JSON.parse(JSON.stringify(this.defaultState)),this.score=0,this.status="idle",this.rows=4,this.cols=4}return e=[{key:"arraysEqual",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"move",value:function(e){var t=this,r=this,n=function(t){for(var n=r.board.map(function(e){return e[t]}),a=(n=o[e](n)).filter(function(e){return 0!==e}),u=0;u<a.length-1;u++)a[u]===a[u+1]&&(a[u]*=2,r.score+=a[u],a[u+1]=0,s=!0);for(a=a.filter(function(e){return 0!==e});a.length<r.rows;)a.push(0);a=i[e](a),r.arraysEqual(r.board.map(function(e){return e[t]}),a)||(s=!0);for(var c=0;c<r.rows;c++)r.board[c][t]=a[c]},o={left:function(e){return e},right:function(e){return e.slice().reverse()},up:function(e){return e},down:function(e){return e.slice().reverse()}},i={left:function(e){return e},right:function(e){return e.slice().reverse()},up:function(e){return e},down:function(e){return e.slice().reverse()}},s=!1;if("left"===e||"right"===e)for(var a=0;a<this.rows;a++)!function(r){for(var n=o[e](t.board[r]).filter(function(e){return 0!==e}),a=0;a<n.length-1;a++)n[a]===n[a+1]&&(n[a]*=2,t.score+=n[a],n[a+1]=0,s=!0);for(n=n.filter(function(e){return 0!==e});n.length<t.rows;)n.push(0);n=i[e](n),t.arraysEqual(t.board[r],n)||(s=!0),t.board[r]=n}(a);else for(var u=0;u<this.cols;u++)n(u);"playing"===this.status&&s&&this.addRandomTile()}},{key:"moveLeft",value:function(){this.move("left")}},{key:"moveRight",value:function(){this.move("right")}},{key:"moveUp",value:function(){this.move("up")}},{key:"moveDown",value:function(){this.move("down")}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.board}},{key:"getStatus",value:function(){return"idle"===this.status?"idle":this.checkWin()?"win":this.checkLose()?"lose":"playing"}},{key:"checkWin",value:function(){return this.board.some(function(e){return e.includes(2048)})}},{key:"checkLose",value:function(){if(this.board.some(function(e){return e.includes(0)}))return!1;for(var e=0;e<this.rows;e++)for(var t=0;t<this.cols;t++)if(t<3&&this.board[e][t]===this.board[e][t+1]||e<3&&this.board[e][t]===this.board[e+1][t])return!1;return!0}},{key:"start",value:function(){this.board=JSON.parse(JSON.stringify(this.defaultState)),this.score=0,this.status="playing",this.addRandomTile(),this.addRandomTile()}},{key:"addRandomTile",value:function(){for(var e=[],t=0;t<this.rows;t++)for(var r=0;r<this.cols;r++)0===this.board[t][r]&&e.push({row:t,col:r});if(e.length>0){var n=e[Math.floor(Math.random()*e.length)],o=n.row,i=n.col;this.board[o][i]=.9>Math.random()?2:4}}},{key:"restart",value:function(){return this.start()}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t.prototype,e),t}());function t(){var t,r,n,o,i=e.getState();document.querySelectorAll(".field-row").forEach(function(e,t){e.querySelectorAll(".field-cell").forEach(function(e,r){var n=i[t][r];e.textContent=0===n?"":n,e.className="field-cell",0!==n&&e.classList.add("field-cell--".concat(n))})}),document.querySelector(".game-score").textContent=e.getScore(),t=e.getStatus(),r=document.querySelector(".message-start"),n=document.querySelector(".message-win"),o=document.querySelector(".message-lose"),r.classList.add("hidden"),n.classList.add("hidden"),o.classList.add("hidden"),"idle"===t?r.classList.remove("hidden"):"win"===t?n.classList.remove("hidden"):"lose"===t&&o.classList.remove("hidden")}document.addEventListener("keydown",function(r){switch(r.key){case"ArrowUp":e.moveUp();break;case"ArrowDown":e.moveDown();break;case"ArrowLeft":e.moveLeft();break;case"ArrowRight":e.moveRight();break;default:return 0}t()});var r=document.querySelector(".start");r.addEventListener("click",function(){r.classList.contains("start")&&(r.classList.replace("start","restart"),r.textContent="Restart"),e.start(),t()})}();
//# sourceMappingURL=index.782f8f2a.js.map
